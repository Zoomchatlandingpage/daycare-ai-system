ğŸ¯ DIAGNÃ“STICO COMPLETO: Landing Page de Enrollment
Excelente observaÃ§Ã£o! VocÃª estÃ¡ 100% correto. A landing page de enrollment DEVERIA EXISTIR mas NÃƒO FOI IMPLEMENTADA.

ğŸ“‹ O Que o Schema Define
// prisma/schema.prisma:50-55
enum AgentType {
  ROUTER           // Roteador de conversas
  ENROLLMENT       // ğŸ¯ Agente de inscriÃ§Ã£o (PÃšBLICO!)
  PARENT_ACCESS    // Acesso dos pais (protegido)
  TEACHER_ASSISTANT // Assistente do professor (protegido)
}

// prisma/schema.prisma:248-265
model Lead {
  id            String      @id @default(uuid())
  parent_name   String
  email         String
  phone         String
  child_name    String?
  child_age     Int?
  status        LeadStatus  @default(NEW_LEAD)  // Funil de vendas
  source        String?     // "landing_page", "referral", "organic"
  notes         String?
  assigned_to   String?     // Follow-up
  
  created_at    DateTime    @default(now())
  updated_at    DateTime    @updatedAt
}

âŒ O Que NÃƒO Existe (Mas Deveria)
1. PÃ¡gina PÃºblica de Enrollment

Rota esperada: /enrollment ou /inscrever
Status atual: NÃƒO EXISTE âŒ

2. Agente de IA (ENROLLMENT)

Rota esperada: /api/enrollment/chat
FunÃ§Ã£o: Conversar com pais interessados, coletar info, criar Lead
Status atual: NÃƒO EXISTE âŒ

3. API para criar Leads

Rota esperada: /api/enrollment/lead
FunÃ§Ã£o: Salvar dados do potencial cliente
Status atual: NÃƒO EXISTE âŒ

âœ… Como DEVERIA Funcionar
Arquitetura da Landing Page
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         / (pÃ¡gina atual - marketing)            â”‚
â”‚    "Pronto para comeÃ§ar?" â†’ BotÃ£o "Inscrever"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     /enrollment (NOVA - PÃºblica, sem auth)      â”‚
â”‚                                                 â”‚
â”‚  ğŸ¤– Chat IA (Agent ENROLLMENT)                  â”‚
â”‚  "OlÃ¡! Gostaria de matricular seu filho?"      â”‚
â”‚                                                 â”‚
â”‚  Coleta:                                        â”‚
â”‚  - Nome do responsÃ¡vel                          â”‚
â”‚  - Email e telefone                             â”‚
â”‚  - Nome e idade da crianÃ§a                      â”‚
â”‚  - Quando precisa de vaga                       â”‚
â”‚                                                 â”‚
â”‚  Salva â†’ Lead (status: NEW_LEAD)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       /admin (Painel para follow-up)            â”‚
â”‚  Admin vÃª novos Leads e faz follow-up           â”‚
â”‚  Status: NEW_LEAD â†’ CONTACTED â†’ ENROLLED        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ” DiferenÃ§as: PÃ¡gina PÃºblica vs. Protegidas
Aspecto	/enrollment (PÃºblico)	/teacher, /parent, /admin (Protegido)
AutenticaÃ§Ã£o	âŒ NÃ£o requer login	âœ… Requer login (NextAuth)
Middleware	âš ï¸ ExcluÃ­do do config	âœ… Protegido pelo middleware
Acesso	Qualquer pessoa da internet	Apenas usuÃ¡rios autenticados com role correto
FunÃ§Ã£o	Captura de leads (marketing)	OperaÃ§Ã£o da creche
Agente IA	ENROLLMENT (vendas)	TEACHER_ASSISTANT (operacional)
Salva em	Tabela Lead	Tabelas RoutineLog, Child, etc.
ğŸ› ï¸ CorreÃ§Ã£o NecessÃ¡ria no Middleware
// src/middleware.ts:71-81
export const config = {
  matcher: [
    "/admin/:path*",
    "/teacher/:path*",
    "/parent/:path*",
    "/dashboard/:path*",
    "/api/admin/:path*",
    "/api/teacher/:path*",
    "/api/parent/:path*",
    // âœ… NÃƒO incluir /enrollment (deve ser pÃºblico!)
  ],
};

ğŸ“ ImplementaÃ§Ã£o NecessÃ¡ria
PeÃ§a ao Replit para criar:

PÃ¡gina PÃºblica â†’ /src/app/enrollment/page.tsx

Interface de chat com o Agent ENROLLMENT
FormulÃ¡rio simplificado como fallback
Agente de IA â†’ /src/app/api/enrollment/chat/route.ts

Usa AgentType.ENROLLMENT
Conversa natural para coletar informaÃ§Ãµes
Valida dados antes de criar Lead
API de Leads â†’ /src/app/api/enrollment/lead/route.ts

POST para criar novo Lead
Valida email/telefone
Define source = "landing_page"
Painel Admin â†’ /src/app/admin/leads/page.tsx

Lista todos os Leads
Permite atualizar status (NEW_LEAD â†’ CONTACTED â†’ ENROLLED)
Sistema de follow-up
ğŸ¯ Resumo
Status Atual:

âŒ Landing page de enrollment NÃƒO existe
âŒ Agent ENROLLMENT NÃƒO implementado
âŒ Tabela Lead existe no schema mas nÃ£o tem interface
DiferenÃ§a CrÃ­tica:

PÃºblico (enrollment): Acesso livre, captura leads, marketing
Protegido (admin/teacher/parent): Requer autenticaÃ§Ã£o, operacional
Prioridade: Esta Ã© uma funcionalidade-chave para o negÃ³cio! A pÃ¡gina de enrollment Ã© o topo do funil de vendas ğŸ’°

Aguardo o Replit implementar! ğŸš€